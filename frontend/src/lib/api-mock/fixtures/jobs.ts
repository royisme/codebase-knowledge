import type { Job, JobLog } from '@/types/job'

export const mockJobs: Job[] = [
  {
    id: 'job-001-running',
    source_id: '5d39db85-33cb-1db3-bcff-c2529bd696ca',
    status: 'running',
    started_at: '2025-10-30T10:15:00Z',
    progress_percentage: 45,
    items_processed: 20,
    total_items: 45,
    job_config: {
      stage: 'code_parse',
      retry_count: 0,
      max_retries: 3,
      timeout_seconds: 900,
    },
    result_summary: {
      files_scanned: 45,
      files_parsed: 20,
      files_failed: 0,
      functions_extracted: 85,
      imports_extracted: 42,
    },
    created_at: '2025-10-30T10:15:00Z',
    updated_at: '2025-10-30T10:25:00Z',
  },
  {
    id: 'job-002-completed',
    source_id: '8a62ad52-66fc-4ca0-acdb-f1852cf929fd',
    status: 'completed',
    started_at: '2025-10-30T13:00:00Z',
    completed_at: '2025-10-30T14:00:00Z',
    progress_percentage: 100,
    items_processed: 150,
    total_items: 150,
    job_config: {
      stage: 'completed',
      retry_count: 0,
      max_retries: 3,
      timeout_seconds: 1800,
    },
    result_summary: {
      files_scanned: 150,
      files_parsed: 148,
      files_failed: 2,
      functions_extracted: 320,
      imports_extracted: 156,
      nodes_created: 450,
      edges_created: 680,
      duration_seconds: 3600,
      errors: [
        { file: 'legacy/old_module.py', error: 'Syntax error on line 45' },
        {
          file: 'utils/deprecated.py',
          error: 'Encoding issue: UnicodeDecodeError',
        },
      ],
    },
    created_at: '2025-10-30T13:00:00Z',
    updated_at: '2025-10-30T14:00:00Z',
  },
  {
    id: 'job-003-failed',
    source_id: '4e28ea96-22ba-0ea4-abee-b1418ac585b9',
    status: 'failed',
    started_at: '2025-10-28T09:00:00Z',
    completed_at: '2025-10-28T10:00:00Z',
    error_message: 'Git clone failed: Authentication required',
    progress_percentage: 10,
    items_processed: 0,
    total_items: 120,
    job_config: {
      stage: 'git_clone',
      retry_count: 3,
      max_retries: 3,
      timeout_seconds: 600,
    },
    created_at: '2025-10-28T09:00:00Z',
    updated_at: '2025-10-28T10:00:00Z',
  },
  {
    id: 'job-004-pending',
    source_id: '7b51bc63-55eb-3ba1-bced-e2741de818ec',
    status: 'pending',
    progress_percentage: 0,
    items_processed: 0,
    job_config: {
      stage: 'git_clone',
      retry_count: 0,
      max_retries: 3,
      timeout_seconds: 1200,
    },
    created_at: '2025-10-30T15:00:00Z',
    updated_at: '2025-10-30T15:00:00Z',
  },
]

export const mockJobLogs: Record<string, JobLog[]> = {
  'job-001-running': [
    {
      timestamp: '2025-10-30T10:15:00Z',
      level: 'info',
      message: '任务开始执行',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-30T10:15:05Z',
      level: 'info',
      message: '正在克隆仓库: https://github.com/example/microservice-utils',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-30T10:16:20Z',
      level: 'info',
      message: 'Git 克隆完成，共 45 个文件',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-30T10:16:25Z',
      level: 'info',
      message: '开始文件扫描',
      stage: 'file_scan',
    },
    {
      timestamp: '2025-10-30T10:17:10Z',
      level: 'info',
      message: '文件扫描完成，符合条件的文件: 45',
      stage: 'file_scan',
    },
    {
      timestamp: '2025-10-30T10:17:15Z',
      level: 'info',
      message: '开始代码解析',
      stage: 'code_parse',
    },
    {
      timestamp: '2025-10-30T10:18:30Z',
      level: 'info',
      message: '已解析 10/45 文件',
      stage: 'code_parse',
    },
    {
      timestamp: '2025-10-30T10:20:45Z',
      level: 'info',
      message: '已解析 20/45 文件',
      stage: 'code_parse',
    },
  ],
  'job-002-completed': [
    {
      timestamp: '2025-10-30T13:00:00Z',
      level: 'info',
      message: '任务开始执行',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-30T13:00:10Z',
      level: 'info',
      message: 'Git 克隆完成',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-30T13:05:00Z',
      level: 'info',
      message: '文件扫描完成，发现 150 个文件',
      stage: 'file_scan',
    },
    {
      timestamp: '2025-10-30T13:15:30Z',
      level: 'warning',
      message: '文件 legacy/old_module.py 解析失败: Syntax error',
      stage: 'code_parse',
    },
    {
      timestamp: '2025-10-30T13:20:00Z',
      level: 'warning',
      message: '文件 utils/deprecated.py 解析失败: Encoding issue',
      stage: 'code_parse',
    },
    {
      timestamp: '2025-10-30T13:35:00Z',
      level: 'info',
      message: '代码解析完成，成功 148/150',
      stage: 'code_parse',
    },
    {
      timestamp: '2025-10-30T13:40:00Z',
      level: 'info',
      message: '开始向量化',
      stage: 'embedding',
    },
    {
      timestamp: '2025-10-30T13:50:00Z',
      level: 'info',
      message: '向量化完成',
      stage: 'embedding',
    },
    {
      timestamp: '2025-10-30T13:52:00Z',
      level: 'info',
      message: '开始构建知识图谱',
      stage: 'graph_build',
    },
    {
      timestamp: '2025-10-30T13:58:00Z',
      level: 'info',
      message: '创建了 450 个节点，680 条边',
      stage: 'graph_build',
    },
    {
      timestamp: '2025-10-30T14:00:00Z',
      level: 'info',
      message: '任务完成',
      stage: 'completed',
    },
  ],
  'job-003-failed': [
    {
      timestamp: '2025-10-28T09:00:00Z',
      level: 'info',
      message: '任务开始执行',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:00:05Z',
      level: 'error',
      message: 'Git 克隆失败: Authentication required',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:05:00Z',
      level: 'info',
      message: '重试 1/3',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:05:05Z',
      level: 'error',
      message: 'Git 克隆失败: Authentication required',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:10:00Z',
      level: 'info',
      message: '重试 2/3',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:10:05Z',
      level: 'error',
      message: 'Git 克隆失败: Authentication required',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:15:00Z',
      level: 'info',
      message: '重试 3/3',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T09:15:05Z',
      level: 'error',
      message: 'Git 克隆失败: Authentication required',
      stage: 'git_clone',
    },
    {
      timestamp: '2025-10-28T10:00:00Z',
      level: 'error',
      message: '任务失败: 已达最大重试次数',
      stage: 'git_clone',
    },
  ],
  'job-004-pending': [
    {
      timestamp: '2025-10-30T15:00:00Z',
      level: 'info',
      message: '任务已创建，等待执行',
      stage: 'git_clone',
    },
  ],
}
